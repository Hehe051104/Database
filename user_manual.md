# 机房管理系统使用手册

## 1. 系统概述

机房管理系统是一个用于管理学校/企业机房资源的综合性系统，实现了对设备、预约、维护等全流程的规范化管理。系统具有以下核心功能：

- 用户管理：支持学生、教师和管理员三种角色
- 设备管理：管理机房内的各类设备信息和状态
- 机房管理：管理机房基本信息和容量
- 预约管理：支持设备预约、审核和冲突检测
- 维护管理：支持设备报修和维护跟踪
- 统计分析：提供设备使用率、维护成本等分析报表
- 审计日志：记录系统关键操作，支持安全审计

## 2. 系统要求

- Python 3.6+
- MySQL 5.7+
- 现代浏览器（Chrome、Firefox、Edge等）

## 3. 安装步骤

### 3.1 数据库安装

1. 确保MySQL服务已安装并启动
2. 使用以下命令导入数据库脚本：

```bash
mysql -u root -p123456 < create_database.sql
```

### 3.2 应用程序安装

1. 安装Python依赖：

```bash
pip install -r requirements.txt
```

2. 配置数据库连接（如需修改）：

编辑 `app/utils/db_config.py` 文件，修改数据库连接参数：

```python
DB_CONFIG = {
    'host': 'localhost',  # 数据库主机
    'user': 'root',       # 数据库用户名
    'password': '123456', # 数据库密码
    'db': 'RoomManagement', # 数据库名称
    'charset': 'utf8mb4',
    'cursorclass': DictCursor
}
```

## 4. 启动系统

执行以下命令启动系统：

```bash
python run.py
```

系统将在 http://localhost:5000 启动，可通过浏览器访问。

## 5. 用户角色与权限

系统支持三种用户角色，各自拥有不同的权限：

### 5.1 学生

- 登录系统
- 查看设备信息
- 预约设备
- 查看自己的预约记录
- 取消自己的预约

### 5.2 教师

- 学生的所有权限
- 审核学生的预约申请
- 报修设备
- 查看设备维护记录

### 5.3 管理员

- 教师的所有权限
- 管理用户（增删改查）
- 管理设备（增删改查）
- 管理机房（增删改查）
- 处理设备维护
- 查看统计报表
- 查看审计日志

## 6. 系统功能说明

### 6.1 登录

- 使用学号/工号和密码登录系统
- 默认测试账号：
  - 学生：账号 2023001，密码 password123
  - 教师：账号 T2023001，密码 password456
  - 管理员：账号 A2023001，密码 admin123

### 6.2 设备管理

- 查看所有设备信息
- 按机房、状态筛选设备
- 添加、编辑、删除设备（仅管理员）
- 更新设备状态（仅管理员）

### 6.3 预约管理

- 查看可用设备并提交预约申请
- 查看自己的预约记录
- 取消预约
- 审核预约申请（教师和管理员）

### 6.4 维护管理

- 报修设备
- 查看维护记录
- 处理维护请求（仅管理员）
- 查看超时未处理的维护请求

### 6.5 统计分析

- 查看设备使用率统计
- 查看机房使用情况
- 查看用户角色统计
- 查看维护统计数据
- 查看月度使用趋势

### 6.6 审计日志

- 查看系统操作日志（仅管理员）
- 按用户、操作类型、目标表筛选日志

## 7. 数据库结构

系统包含以下主要数据表：

- users：用户表
- rooms：机房表
- devices：设备表
- reservations：预约记录表
- maintenances：维护记录表
- audit_log：审计日志表

## 8. 常见问题

### 8.1 数据库连接失败

- 检查MySQL服务是否启动
- 检查数据库连接参数是否正确
- 检查数据库用户权限

### 8.2 预约冲突

- 系统会自动检测预约时间冲突
- 如遇冲突，请选择其他时间段或设备

### 8.3 权限问题

- 确保使用正确的用户角色登录
- 不同角色拥有不同的操作权限

## 9. 联系与支持

如有任何问题或需要技术支持，请联系系统管理员。
